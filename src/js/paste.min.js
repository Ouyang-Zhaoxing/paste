var editor,jsonbinKey="$2b$10$kJPWricyWsFwxrp8PxwvdOS7yXESfKCJw3q1U1KqUkxzM/XUr6AOm",host="https://paste.blinking.fun",supportLanguage={"C/C++":"c_cpp","C#":"csharp",Java:"java",JavaScript:"javascript",TypeScript:"typescript",Lua:"lua",Go:"golang",Ruby:"ruby",PHP:"php",Rust:"rust",Python:"python",R:"r",Haskell:"haskell","F#":"fsharp",HTML:"html",CSS:"css",XML:"xml",JSON:"json"},expiration={"永久":"forever"};function init(){var e=-1!==location.search.indexOf("?id");"pc"===browserCheck()||e?(document.getElementById("title").addEventListener("click",function(){location.href=host}),document.getElementById("code-main").style.display="inline-block",initEdit(),e?viewCode(location.search.substr(1).split("&")[0].split("=")[1]):(document.getElementById("select-and-submit").style.display="inline",addLanguageAndExpiration())):document.getElementById("mobile-tips").style.display="inline-block"}function initEdit(){ace.config.set("basePath","src/js"),(editor=ace.edit("editor")).setOptions({showFoldWidgets:!1}),editor.session.setMode("ace/mode/c_cpp")}function addLanguageAndExpiration(){var e,t=document.getElementById("language");for(e in supportLanguage)(o=document.createElement("option")).textContent=e,o.setAttribute("value",supportLanguage[e]),t.appendChild(o);var n,o,t=document.getElementById("expiration");for(n in expiration)(o=document.createElement("option")).textContent=n,o.setAttribute("value",expiration[n]),t.appendChild(o);t.addEventListener("change",function(){editor.session.setMode("ace/mode/"+t.value)})}function viewCode(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){var e;t.readyState===XMLHttpRequest.DONE&&(e=JSON.parse(t.response),editor.session.setValue(e.code),editor.session.setMode("ace/mode/"+e.language))},t.open("GET","https://api.jsonbin.io/b/"+e,!0),t.setRequestHeader("secret-key",jsonbinKey),t.send(),"pc"===browserCheck()?(document.getElementById("copy-link").style.display="inline",(e=new ClipboardJS("#copy-link",{text:function(){return window.location.href}})).on("success",function(e){alert("已成功复制分享链接到剪切板！")}),e.on("error",function(e){console.log("设置剪切板失败，请手动复制顶部分享链接。")})):editor.setReadOnly(!0)}function pasteCode(){var n,e=document.getElementById("language").value,t=editor.session.getValue();""!=t?(document.getElementById("submit").setAttribute("disabled",!0),t={language:e,code:t},t=JSON.stringify(t),(n=new XMLHttpRequest).onreadystatechange=function(){var e,t;n.readyState===XMLHttpRequest.DONE&&200===n.status&&(e=JSON.parse(n.response).id.toString(),t=host+"?id="+e,setTimeout(function(){location.href=t},300))},n.open("POST","https://api.jsonbin.io/b",!0),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("secret-key",jsonbinKey),n.setRequestHeader("collection-id","5fe90b45c8f3567b4a1f2d73"),n.send(t)):alert("请先粘贴代码！")}function JumpDoc(){window.open("https://zh.cppreference.com")}function JumpRun(){window.open("https://tech.io/snippet?l=c")}function JoinQGroup(){window.open("https://qm.qq.com/cgi-bin/qm/qr?k=qyc88rKN05A-FBmfFe2c656Fof2OyAEK&jump_from=webapi")}function browserCheck(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("android")?"android":-1!==e.indexOf("iphone")?"ios":-1!==e.indexOf("ipad")?"ipad":"pc"}